# Pandanmuku

> Another CJSoft Production

Pandanmuku是一套中心式弹幕系统，用户访问中心服务器在网页上发送弹幕，服务器将弹幕推送的客户机并在客户机的屏幕上进行显示。

前端由python编写，使用原生wsgi，没有使用任何框架

## server
启动：`python pandanmuku.py`，其中服务器的Web前段端口将由源码中第249行决定，与客户机通讯的端口由247行决定。
您可以通过向`userjson.cjsx`中添加键值对来指定客户机id和登录口令（需要重启）。
一般情况下，您可以不必做以上的事情，客户机会自动尝试申请一个随机的id、口令，除非您将第247行的最后一个参数改为False

## client
启动：运行`CJSoft_Danmaku_System.exe`，在此之前，您可能想对`settings.cjsx`进行修改，其中您可以设置弹幕字体，随机颜色列表和速度以及刷新率。服务器的地址IP和本地端口也在此文件中设置。
关闭：将点选任务栏中的程序图标，按<kbd>Esc</kbd>。
您可以通过formset中提供的实用程序来设置弹幕出现的范围（需要重启），可以通过id中提供的实用程序来设置客户机的登录id和口令（一般情况下程序会自动申请，并在第一次向您展示出id）

发送弹幕需访问 example.com/<客户机id>

> 这只是一个简易的并不高效的client，您根据通信规则来制作您自己的client，通讯内容请参照源码